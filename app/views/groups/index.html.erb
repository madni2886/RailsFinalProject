<h1>Groups
<%= link_to "Create Group", new_user_group_path(current_user),class: "btn btn-xs btn-primary"%>
</h1>
<div class="flex_products">
  <% @group.each do |group| %>
    <%y=group.memberships.where(user_id:current_user.id)%>

    <% if y[0]==nil%>
      <%userid=-1 %>
      <% req=false%>
    <%else %>
      <%userid=y[0].user_id %>
      <%req=y[0].req%>
    <%end %>
    <%x=group.memberships.where(user_id:current_user.id)%>

    <% if x[0]==nil%>
      <%userid=-1 %>
    <%else %>
      <%userid=x[0].user_id %>
    <%end %>


    <div class="products" >
      <% if group.image.attached? %>
        <div class="title">
          <%=group.title%>
        </div>
        <%= image_tag group.image, class:"image"%>
      <%else%>
        <div class="title">
          <%= group.title %>
        </div>
      <% end %>

      <div>
        <small>Created by: <%= group.users[0].email %>,
          <%= time_ago_in_words(group.created_at) %> ago,<br>
          last updated: <%= time_ago_in_words(group.updated_at) %> ago</small>
      </div>
      <div class="Button">
        <%if req==true||group.group_type=="public"||group.group_type=="Public" %>
          <%=  link_to "SHOW", user_group_path(current_user,group), class: "btn btn-xs btn-primary" %>
        <%else %>
          <p>Your have not followed yet</p>
        <%end %>
        <%m=Membership.find_by(user_id:current_user.id,group_id:group.id)%>
        <%if m==nil%>
          <%= link_to link_to "Join", join_user_group_path(current_user,group),
                      class: "btn btn-xs btn-danger"  %>


        <%end%>

      </div>
    </div>

  <% end %>

</div>

